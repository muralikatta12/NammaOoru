<div class="container py-5" *ngIf="!loading; else loadingTemplate">
  <div class="row">
    <!-- Main Content -->
    <div class="col-lg-8">
      <!-- Header -->
      <div class="d-flex justify-content-between align-items-start mb-4">
        <div>
          <h1 class="display-5 fw-bold">{{ report.title }}</h1>
          <p class="text-muted">
            Reported on {{ report.createdAt | date:'mediumDate' }} at {{ report.createdAt | date:'shortTime' }}
          </p>
        </div>
        <span class="badge fs-5 px-4 py-3" [class]="statusBadge[report.status]">
          {{ statusLabels[report.status] }}
        </span>
      </div>

      <!-- Primary Photo -->
      <div *ngIf="primaryPhoto" class="mb-5 rounded-4 overflow-hidden shadow-lg">
        <img [src]="baseUrl + primaryPhoto.photoUrl"
             class="w-100"
             style="max-height: 500px; object-fit: cover;"
             alt="Main report photo">
      </div>

      <!-- Description -->
      <div class="bg-white rounded-4 shadow p-5 mb-5">
        <h3 class="fw-bold mb-3">Description</h3>
        <p class="lead">{{ report.description }}</p>
      </div>

      <!-- Details Card -->
      <div class="row g-4">
        <div class="col-md-6">
          <div class="card h-100 border-0 shadow-sm">
            <div class="card-body">
              <h5 class="card-title text-success"><i class="bi bi-geo-alt-fill"></i> Location</h5>
              <p class="card-text">{{ report.locationAddress }}</p>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="card h-100 border-0 shadow-sm">
            <div class="card-body">
              <h5 class="card-title text-primary"><i class="bi bi-tag-fill"></i> Category</h5>
              <p class="card-text fw-bold">{{ report.category || 'General' }}</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Sidebar: All Photos -->
    <div class="col-lg-4">
      <div class="card border-0 shadow sticky-top" style="top: 100px;">
        <div class="card-header bg-success text-white">
          <h5 class="mb-0"><i class="bi bi-images"></i> Photos ({{ report.photos.length }})</h5>
        </div>
        <div class="card-body photo-gallery p-3">
          <div *ngFor="let photo of report.photos" class="mb-3 rounded-3 overflow-hidden shadow-sm">
            <img [src]="baseUrl + photo.photoUrl"
                 class="w-100 rounded-3"
                 style="height: 180px; object-fit: cover;"
                 alt="Report photo">
            <small class="text-muted d-block text-center mt-2">
              {{ photo.caption || 'No caption' }}
            </small>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="text-center mt-5">
    <a routerLink="/reports" class="btn btn-outline-success btn-lg">
      <i class="bi bi-arrow-left"></i> Back to Reports
    </a>
  </div>
</div>

<!-- Loading Template -->
<ng-template #loadingTemplate>
  <div class="text-center py-5">
    <div class="spinner-border text-success" style="width: 4rem; height: 4rem;"></div>
    <h3 class="mt-3">Loading report...</h3>
  </div>
</ng-template>